<?php

namespace DBundle\Repository;

use DBundle\Entity\Communication;

/**
 * CommunicationRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CommunicationRepository extends \Doctrine\ORM\EntityRepository
{
    public function getByNif($thisNif = null)
    {
			$queryBuilder = $this->getEntityManager()->createQueryBuilder();
	        $queryBuilder->select('commnunication')
                     	->from(Communication::class, 'commnunication');
        
            $queryBuilder->andWhere('commnunication.nif LIKE :thisNif')
                         ->setParameter('thisNif', '%'.$thisNif.'%');
        

        $query = $queryBuilder->getQuery();

        return $query->getResult();
    }
    public function getByRsoc($thisRsoc = null)
    {
			$queryBuilder = $this->getEntityManager()->createQueryBuilder();
	        $queryBuilder->select('commnunication')
                     	->from(Communication::class, 'commnunication');
        
            $queryBuilder->andWhere('commnunication.rs LIKE :thisNif')
                         ->setParameter('thisNif', '%'.$thisRsoc.'%');
        

        $query = $queryBuilder->getQuery();

        return $query->getResult();
    }
}
